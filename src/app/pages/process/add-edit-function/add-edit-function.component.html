<div class="modal-header">
  <h4 class="modal-title" id="modal-basic-title">Add Function</h4>
  <button type="button" class="close" aria-label="Close" (click)="activeModal.dismiss('Cross click')">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
<form #functionForm="ngForm">
  <div class="modal-body">
    <div class="row">
      <div class="col-md-12 form-group">
        <label>Function Name</label>
        <select class="form-control" name="function" [(ngModel)]="funcObj.func_value" #func="ngModel">
          <option disabled value="">Select Function</option>
          <option *ngFor="let function of functionDropdown" [value]="function.id">{{function.name}}</option>
        </select>
        <div *ngIf="func.invalid && (func.dirty || func.touched)" class="errors">
          <div *ngIf="func.errors && func.errors.required">
            Function Name is required.
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-5">
        <div class="form-group">
          <label>Function Position</label>
          <select class="form-control" [(ngModel)]="funcObj.func_position" name="stepNo" #position="ngModel" required>
            <option *ngFor="let p of positionValues" [value]="p">{{p}}</option>
          </select>
          <div *ngIf="position.invalid && (position.dirty || position.touched)" class="errors">
            <div *ngIf="position.errors && position.errors.required">
              Function Position is required.
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-2">
      </div>
      <div class="col-md-5" *ngIf="functionList.length">
        <h5>Current Functions:</h5>
        <div *ngFor="let i of functionList;let z=index">
          <span>{{z+1}}.</span>&nbsp;<span>{{i.func_name}}</span>
        </div>
      </div>
    </div>
    <div *ngIf="funcObj.func_value==='pump'">
      <div class="row">
        <div class="col-md-5">
          <div class="form-group">
            <label>Pump Speed(%)</label>
            <input nbInput fullWidth fieldSize="small" class="form-control input-group input-group-sm"
              (keypress)="numberOnly($event)" [(ngModel)]="pumpObj.pump_speed" name="pumpspeed" #Speed="ngModel" />
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="funcObj.func_value==='water'">
      <span>IN</span>
      <div class="row">
        <div class="col-md-12">
          <div class="form-group">
            <label>Water Type</label>
            <nb-radio-group class="form-control" name="water" [(ngModel)]="waterObj.water_type">
              <nb-radio *ngFor="let w of waterList" [value]="w.id">{{w.name}}</nb-radio>
            </nb-radio-group>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-5">
          <div class="form-group">
            <label>Fabric Ratio</label>
            <input nbInput fullWidth fieldSize="small" class="form-control input-group input-group-sm"
              (keypress)="numberOnly($event)" [(ngModel)]="waterObj.fabric_ratio" name="fabricRatio" />
          </div>
        </div>
        <div class="col-md-4">
          <div class="form-group">
            <nb-checkbox style="margin-top:13px" name="jet" [(ngModel)]="waterObj.jet_level">Jet Level</nb-checkbox>
          </div>
        </div>
      </div>
      <br>
      <span>DRAIN</span>
      <div class="row">
        <div class="col-md-12">
          <div class="form-group">
            <label>Drain Type</label>
            <nb-radio-group name="water_drain" class="form-control" [(ngModel)]="waterObj.drain_type">
              <nb-radio *ngFor="let d of drainTypeList" [value]="d.id">{{d.name}}</nb-radio>
            </nb-radio-group>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="funcObj.func_value==='temp'">
      <div class="row">
        <div class="col-md-4">
          <div class="form-group">
            <label>S V (Set Value)(C)</label>
            <input nbInput fullWidth fieldSize="small" class="form-control input-group input-group-sm"
              (keypress)="numberOnly($event)" [(ngModel)]="tempObj.set_value" name="setValue" />
          </div>
        </div>
        <div class="col-md-5">
          <div class="form-group">
            <label>Rate of Rise (C/minute)</label>
            <input nbInput fullWidth fieldSize="small" class="form-control input-group input-group-sm"
              (keypress)="numberOnly($event)" [(ngModel)]="tempObj.rate_of_rise" name="rateRise" />
          </div>
        </div>
        <div class="col-md-3">
          <div class="form-group">
            <label>Hold Time</label>
            <input nbInput fullWidth fieldSize="small" class="form-control input-group input-group-sm"
              (keypress)="numberOnly($event)" [(ngModel)]="tempObj.hold_time" name="holdTime" />
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <div class="form-group">
            <nb-checkbox name="pressure" [(ngModel)]="tempObj.pressure">Pressure (Above 80 C)</nb-checkbox>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="funcObj.func_value==='dosing'">
      <div class="row">
        <div class="col-md-6">
          <div class="form-group">
            <label>Fill Side Tank </label>
            <select class="form-control" name="fill" [(ngModel)]="dosingObj.fill_type">
              <option *ngFor="let fill of fillList" [value]="fill.id">{{fill.name}}</option>
            </select>
          </div>
        </div>
        <div class="col-md-6">
          <div class="form-group">
            <label>Fill Side Tank (%)</label>
            <input nbInput fullWidth fieldSize="small" class="form-control input-group input-group-sm"
              (keypress)="numberOnly($event)" [(ngModel)]="dosingObj.dosing_percentage" name="dosingpercentage" />
          </div>
        </div>
      </div>
      <br>
      (Will dose after Operator Configurations)
      <div class="row">
        <div class="col-md-12">
          <div class="form-group">
            <nb-checkbox style="margin-top:13px" name="dose" [(ngModel)]="dosingObj.have_dose"> dose at Temp (C) <input
                class="col-md-3" nbInput name="tempDosing" [(ngModel)]="dosingObj.dose_at_temp"></nb-checkbox>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button nbButton [disabled]="functionForm.invalid" (click)="onSubmit()">Create</button>
    <button nbButton (click)="activeModal.close(false)">Cancel</button>
  </div>
</form>